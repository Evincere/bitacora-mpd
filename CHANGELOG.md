# Registro de Cambios (Changelog)

## [Unreleased]

### Agregado
- Implementación del Sprint 16: Entidad TaskRequest (Solicitud de Tarea)
  - Diseño detallado de la nueva entidad `TaskRequest` separada de `Activity`
  - Implementación de la capa de dominio para la entidad `TaskRequest`
    - Creación de la clase `TaskRequest` con atributos y métodos de negocio
    - Implementación de enumeraciones `TaskRequestStatus` y `TaskRequestPriority`
    - Creación de clases `TaskRequestCategory`, `TaskRequestComment` y `TaskRequestAttachment`
    - Implementación de interfaces de repositorio `TaskRequestRepository` y `TaskRequestCategoryRepository`
    - Implementación de interfaces de servicio `TaskRequestService` y `TaskRequestCategoryService`
  - Implementación de la capa de aplicación para la entidad `TaskRequest`
    - Creación de casos de uso `CreateTaskRequestUseCase` y `UpdateTaskRequestUseCase`
    - Implementación del servicio `TaskRequestWorkflowService` para gestionar el flujo de trabajo
    - Implementación del servicio `TaskRequestCategoryService` para gestionar categorías
    - Creación de DTOs para la comunicación con la capa de infraestructura
    - Implementación de mappers para convertir entre entidades de dominio y DTOs
  - Implementación de la capa de infraestructura para la entidad `TaskRequest`
    - Creación de entidades JPA `TaskRequestEntity`, `TaskRequestCategoryEntity`, etc.
    - Implementación de repositorios JPA `TaskRequestJpaRepository` y `TaskRequestCategoryJpaRepository`
    - Implementación de adaptadores de repositorio `TaskRequestRepositoryAdapter` y `TaskRequestCategoryRepositoryAdapter`
    - Creación de controladores REST `TaskRequestController` y `TaskRequestCategoryController`
    - Implementación de seguridad para endpoints con anotaciones `@PreAuthorize`
    - Creación de script de migración para las nuevas tablas con datos iniciales
  - Implementación de la interfaz de usuario para la entidad `TaskRequest`
    - Creación de tipos TypeScript para las solicitudes de tareas
    - Implementación de servicios de frontend para interactuar con la API
    - Creación de componentes React para listar, ver, crear y editar solicitudes
    - Implementación de componentes para gestionar categorías y ver estadísticas
    - Creación de páginas y rutas para las diferentes funcionalidades
    - Actualización del menú de navegación con las nuevas opciones
    - Implementación de control de acceso basado en roles en el frontend
  - Implementación de pruebas y documentación
    - Creación de pruebas unitarias para entidades de dominio y casos de uso
    - Implementación de pruebas para servicios de aplicación
    - Creación de pruebas de integración para controladores REST
    - Implementación de pruebas para adaptadores de repositorio
    - Creación de documentación de usuario con guías detalladas
    - Implementación de documentación técnica para desarrolladores
  - Documentación del modelo de dominio con diagrama UML y reglas de negocio

- Corrección de problemas con las rutas de API en el frontend y backend
  - Eliminación del prefijo duplicado `/api` en las URLs del servicio de solicitudes
  - Actualización del controlador ActivityUserController para manejar rutas con y sin el prefijo `/api`
  - Mejora de logs para depuración de solicitudes HTTP
- Corrección de problemas con las solicitudes de usuario
  - Actualización del DTO ActivityDto para incluir el campo requesterId
  - Mejora del mapeo entre Activity y ActivityExtended para preservar el requesterId
  - Corrección del controlador ActivityUserController para mostrar correctamente las solicitudes del usuario
  - Manejo de errores mejorado para casos donde el usuario no está autenticado correctamente
  - Actualización del método mapToDto en ActivityWorkflowController para incluir el requesterId en la respuesta
  - Diferenciación clara entre solicitudes y actividades mediante estados específicos
  - Actualización del enum ActivityStatus para incluir estados del flujo de trabajo
  - Mejora de los métodos findByRequesterId y countByRequesterId para filtrar correctamente
- Mejora de la interfaz de usuario
  - Corrección de contraste en los campos de formulario para mejorar la accesibilidad
  - Mejora visual de los selectores con iconos de flecha
  - Adición de efectos visuales para estados de foco en campos de entrada
  - Estandarización de estilos de entrada en toda la aplicación
  - Mejora del control deslizante de progreso para mayor visibilidad
  - Corrección del menú desplegable de plantillas para que se muestre correctamente dentro de la ventana
- Implementación de controlador ActivityMetadataController para gestionar metadatos de actividades
  - Endpoint para obtener categorías de actividades (/api/activities/categories)
  - Endpoint para obtener prioridades de actividades (/api/activities/priorities)
  - Creación de DTO ActivityPriorityDTO para representar prioridades
- Corrección de errores en el frontend para usar las rutas correctas de la API
  - Eliminación del prefijo duplicado /api en solicitudesService.ts
  - Ajuste del formato de fechas para cumplir con el formato esperado por el backend (formato yyyy-MM-dd'T'HH:mm:ss sin milisegundos)
  - Ajuste del formato de datos enviados al endpoint de solicitudes para cumplir con el contrato de la API
  - Corrección de permisos para usuarios con rol SOLICITANTE, asegurando que tengan el permiso REQUEST_ACTIVITIES
  - Implementación de encabezados personalizados para solicitudes a endpoints protegidos, añadiendo X-User-Permissions
- Implementación de filtro de seguridad personalizado en el backend
  - Creación de CustomPermissionsFilter para procesar encabezados X-User-Permissions
  - Integración del filtro en la cadena de filtros de seguridad
  - Soporte para añadir permisos temporales a la autenticación actual
- Corrección de error en la creación de actividades
  - Asegurar que el campo userId se establezca correctamente al crear una actividad
  - Modificación del método request en ActivityExtended para establecer userId si es nulo
  - Establecer explícitamente el userId en el controlador ActivityWorkflowController
  - Implementación de ActivityExtendedMapper para manejar correctamente la conversión entre Activity y ActivityExtended
  - Actualización de ActivityWorkflowService para usar el nuevo mapper y evitar errores de casting
  - Creación de endpoint para obtener las solicitudes del usuario actual
  - Mejora del contraste visual en la vista de "Mis Solicitudes" para mejor legibilidad
- Corrección de errores en la configuración de Zipkin
  - Eliminación de configuraciones duplicadas en application.yml
- Implementación de pruebas unitarias y de integración (Sprint 15, punto 8)
  - Pruebas unitarias para la capa de dominio
    - Creación de ActivityExtendedTest para probar los métodos de cambio de estado
    - Implementación de ActivityStateTest para probar el patrón State y las transiciones entre estados
    - Creación de ActivityStatusNewTest para probar la enumeración y sus métodos
  - Pruebas unitarias para la capa de aplicación
    - Implementación de ActivityWorkflowServiceTest para probar el servicio de flujo de trabajo
    - Pruebas para verificar el comportamiento correcto de las transiciones de estado
    - Pruebas para verificar el manejo de errores y excepciones
  - Pruebas de integración
    - Creación de ActivityWorkflowControllerTest para probar los endpoints REST
    - Implementación de ActivityWorkflowIntegrationTest para probar el flujo completo
    - Pruebas para verificar la autorización y permisos en los endpoints
    - Pruebas para verificar la validación de datos de entrada
    - Creación de ActivityWorkflowIntegrationTestNew con enfoque simplificado para pruebas
    - Implementación de ActivityRepositoryMock para pruebas sin dependencia de base de datos
  - Actualización de CHANGELOG.md para registrar las pruebas implementadas
- Implementación de permisos específicos para el flujo de trabajo de actividades
  - Creación de migración V14__Add_Workflow_Permissions.sql para agregar permisos específicos
  - Actualización de pruebas de integración para usar los permisos correctos
  - Mejora en la configuración de autenticación para pruebas
  - Actualización de data.sql para incluir permisos de flujo de trabajo (REQUEST_ACTIVITIES, ASSIGN_ACTIVITIES, EXECUTE_ACTIVITIES, APPROVE_ACTIVITIES)

### Corregido
- Corrección de advertencias de Checkstyle relacionadas con números mágicos
  - Corregido CacheConfig.java para extraer constantes para valores de configuración de caché
  - Corregido WebConfig.java para extraer constante para el tiempo máximo de caché CORS
  - Corregido WebSocketAuthenticationConfig.java para extraer constante para la longitud del prefijo Bearer
  - Corregido JwtAuthenticationFilter.java para extraer constante para la longitud del prefijo Bearer
  - Corregido GenerateEmployeePasswords.java para extraer constantes para los números de legajo inicial y final
- Corrección de prueba unitaria ActivityExtendedTest para reflejar el comportamiento real del código
  - Actualizado el test testAssign para esperar ActivityStatus.EN_PROGRESO en lugar de PENDIENTE
- Corrección de advertencias de Checkstyle relacionadas con parámetros que deberían ser final en clases de dominio
  - Corregido AbstractActivityState.java para hacer final los parámetros de métodos y constructor
  - Corregido ActivityStateFactory.java para hacerla final y con constructor privado
  - Corregido RequestedState.java para hacer final los parámetros de métodos
  - Corregido AssignedState.java para hacer final los parámetros de métodos
  - Corregido InProgressState.java para hacer final los parámetros de métodos
  - Corregido CompletedState.java para hacer final los parámetros de métodos
  - Corregido AbstractValueObject.java para hacer final los parámetros y añadir llaves a bloques if
  - Corregido ValueObject.java para añadir documentación Javadoc completa
  - Corregido UserSession.java para hacer final los parámetros de métodos
  - Corregido ActivityHistory.java para hacer final los parámetros del método createStatusChange
  - Corregido ActivityPriority.java para hacer final los parámetros de constructor y métodos
  - Corregido ActivityStatus.java para hacer final los parámetros de constructor y método fromString
  - Corregido ActivityStatusNew.java para hacer final los parámetros de constructor y método fromString
  - Corregido ActivityType.java para hacer final los parámetros de constructor y método fromString
  - Corregido operadores || en nuevas líneas en varias clases de enumeración
- Corrección de error en ActivityStateFactory para manejar correctamente estados nulos
  - Añadida validación explícita para lanzar IllegalArgumentException cuando se pasa un estado nulo
- Corrección de implementación del patrón State en clases de estado de actividades
  - Corregido PendingState para usar el constructor de AbstractActivityState correctamente
  - Actualizado RequestedState para permitir la transición a InProgressState directamente
  - Corregido ActivityWorkflowService para manejar correctamente los estados de actividades
  - Añadida prueba unitaria para verificar la transición de RequestedState a InProgressState
  - Mejorado el mapeo entre ActivityStatusNew y ActivityStatus en ActivityWorkflowService

### Corregido
- Corrección de advertencias de Checkstyle relacionadas con parámetros que deberían ser final
  - Corregido ApiError.java para hacer final los parámetros de constructores y métodos
  - Corregido ErrorCode.java para hacer final el parámetro del constructor
  - Corregido InvalidTokenException.java para hacer final los parámetros de constructores
  - Corregido ResourceNotFoundException.java para hacer final los parámetros de constructores
  - Corregido NotificationAdapter.java para hacer final los parámetros de métodos
  - Corregido WebSocketController.java para hacer final los parámetros de métodos
  - Corregido UserSessionAdapter.java para hacer final los parámetros de métodos
  - Corregido Password.java para hacer final los parámetros de métodos
  - Corregido Permission.java para hacer final los parámetros de métodos
  - Corregido PersonName.java para hacer final los parámetros de métodos y declarar la clase como final
  - Corregido User.java para hacer final los parámetros de métodos
  - Corregido UserRole.java para hacer final los parámetros de métodos
- Corrección de advertencias de Checkstyle relacionadas con operadores en nuevas líneas
  - Corregido User.java para colocar operadores || en nuevas líneas
  - Corregido Permission.java para colocar operadores || en nuevas líneas
  - Corregido PersonName.java para colocar operadores && en nuevas líneas
  - Corregido UserRole.java para colocar operadores || en nuevas líneas
- Corrección de advertencias de Checkstyle relacionadas con clases de utilidad con constructores públicos
  - Corregido GenerateEmployeePasswords.java para hacerla final y con constructor privado
  - Corregido GeneratePassword.java para hacerla final y con constructor privado
  - Corregido PasswordHashGenerator.java para hacerla final y con constructor privado
- Corrección de advertencias de Checkstyle relacionadas con importaciones con comodín
  - Corregido ActuatorConfig.java para reemplazar import org.springframework.boot.actuate.endpoint.web.* con importaciones específicas
  - Corregido UserMapper.java para reemplazar import com.bitacora.domain.model.user.* con importaciones específicas
- Corrección de advertencias de Checkstyle relacionadas con longitud de línea excesiva
  - Corregido ActuatorConfig.java para dividir expresiones condicionales largas en variables intermedias
  - Corregido DeadlineReminderService.java para extraer variables intermedias en la creación de notificaciones
  - Corregido OpenApiGenerator.java para dividir la creación de esquemas en variables intermedias
- Corrección de advertencias de Checkstyle relacionadas con clases de valor que deberían ser finales
  - Corregido Email.java para hacerla final y añadir modificadores final a los parámetros de métodos
  - Corregido Password.java para hacerla final

- Implementación de usuarios desde archivo CSV de empleados
  - Creación de migración V8__Add_Employees_From_CSV.sql para agregar usuarios del archivo
  - Configuración de DNI como nombre de usuario y número de legajo + "@Pass" como contraseña
  - Asignación de roles específicos: SOLICITANTE, EJECUTOR, ASIGNADOR
  - Asignación del rol ASIGNADOR únicamente a Adriana Sanchez
  - Actualización del usuario admin para que sea Semper Evincere
  - Asignación de permisos adecuados según el rol de cada usuario
  - Corrección de la migración para eliminar primero las actividades asociadas a usuarios
  - Creación de migración V9__Fix_User_Passwords.sql para corregir las contraseñas de los usuarios
  - Creación de migración V10__Update_User_Passwords_Format.sql para actualizar el formato de contraseñas a legajo@Pass
  - Creación de migración V11__Fix_User_Passwords_For_Testing.sql para asegurar que las contraseñas se actualicen correctamente
  - Creación de migración V12__Fix_Employee_Passwords.sql para establecer contraseñas conocidas y funcionales
  - Creación de migración V13__Fix_Employee_Passwords_With_System_Hash.sql para usar el hash generado por el sistema
  - Corrección del método de logout en el frontend para enviar correctamente el token de autorización
  - Actualización de la documentación para reflejar el nuevo formato de contraseñas
  - Simplificación de contraseñas de usuarios a "Test@1234" para facilitar pruebas

### Corregido
- Solución para permitir que el usuario ADMIN acceda a todos los dashboards y vistas específicas de cada rol
- Modificación del componente App.tsx para usar RoleBasedLayout en lugar de MainLayout
- Corrección del manejo de roles de usuario en el frontend para asegurar que se respeten las restricciones de acceso basadas en roles
- Actualización de la forma en que se almacena y recupera el rol del usuario en localStorage
- Corrección de la respuesta de autenticación en el backend para enviar el rol como un campo único en lugar de una lista
- Mejora del componente de depuración para mostrar información detallada sobre el rol del usuario
- Corrección del mapeo de roles en el frontend para manejar correctamente la respuesta del backend
- Corrección del menú lateral para mostrar solo las secciones correspondientes al rol del usuario
- Implementación de condiciones en RoleBasedSidebar para mostrar elementos de menú según el rol del usuario
- Adición de iconos faltantes en RoleBasedSidebar
- Modificación del componente RoleBasedSidebar para mostrar todos los elementos del menú al usuario ADMIN
- Adición de componente de depuración para verificar el rol del usuario
- Implementación de protección de rutas basada en roles para permitir que el usuario ADMIN acceda a todos los dashboards y vistas específicas de cada rol
- Creación de componente RoleProtectedRoute para manejar la lógica de acceso basado en roles
- Actualización de las rutas para usar el componente de protección de rutas
- Solución al problema de carga de rutas basadas en roles
- Creación de componente PlaceholderDashboard para mostrar en rutas en desarrollo
- Modificación de App.tsx para cargar directamente las rutas en lugar de usar lazy loading
- Implementación de rutas directas para cada sección (solicitudes, asignación, tareas, etc.)
- Activación de las interfaces específicas por rol (SOLICITANTE, ASIGNADOR, EJECUTOR)
  - Reemplazo de componentes PlaceholderDashboard por los componentes reales
  - Importación de todos los componentes necesarios para las interfaces específicas por rol
  - Configuración de rutas para usar los componentes reales en lugar de placeholders
- Corrección de problemas de componentes duplicados en el frontend
  - Corregido error de identificadores duplicados en CategoriasList.tsx
  - Corregido error de identificadores duplicados en PrioridadesList.tsx
  - Implementado componente Card faltante
  - Corregidas importaciones en index.ts
  - Implementado componente Skeleton con exportación por defecto
  - Corregido error de exportación en Skeleton.tsx
- Implementación de protección de rutas basada en roles
  - Mejorado componente ProtectedRoute para verificar autenticación de manera más robusta
  - Integrado RoleProtectedRoute en App.tsx para proteger rutas específicas por rol
  - Configurado acceso por roles: ADMIN (acceso irrestricto), SOLICITANTE, ASIGNADOR, EJECUTOR
  - Implementadas redirecciones adecuadas para usuarios sin permisos
  - Protegidas rutas de configuración y reportes para que solo sean accesibles por ADMIN
  - Corregido error de importación de RoleProtectedRoute y UserRole en App.tsx

### Corregido
- Problema de autenticación con contraseñas incorrectas después de migrar a Flyway
- Endpoints de estadísticas de actividades que devolvían errores 500
  - Corregida la configuración del controlador de actividades para soportar rutas con prefijo /api
  - Implementado controlador de diagnóstico para verificar rutas disponibles
  - Actualizado el controlador para manejar correctamente ambos prefijos de ruta (/activities y /api/activities)
- Manejo de errores mejorado en los endpoints de actividades
- Limpieza de archivos temporales y código no utilizado
- Error en componentes que usaban useToastContext sin estar dentro de un ToastProvider
  - Reemplazado useToastContext por react-toastify en todos los componentes afectados
  - Simplificado el sistema de notificaciones para usar directamente toast de react-toastify

### Agregado
- Implementación de interfaces específicas por rol (Sprint 15, punto 4)
  - Dashboard para SOLICITANTE con:
    - Resumen de solicitudes por estado
    - Visualización de tiempos de respuesta
    - Lista de solicitudes recientes
    - Indicadores de progreso para seguimiento de solicitudes
    - Sección de próximas fechas límite
  - Formulario de solicitud mejorado:
    - Conexión con el endpoint /api/activities/request
    - Selección de categoría y prioridad desde datos reales
    - Sistema de adjuntos para solicitudes con previsualización
    - Validación de formularios con Zod
    - Indicadores de estado de carga durante el envío
  - Dashboard para ASIGNADOR con:
    - Bandeja de entrada de solicitudes pendientes
    - Visualización de tareas asignadas por ejecutor
    - Gráficos de distribución de carga
    - Filtros por categoría y prioridad
  - Formulario de asignación de tareas:
    - Interfaz para asignar tareas a ejecutores
    - Selección de prioridad y fecha límite
    - Sistema de notas para la asignación
    - Conexión con el endpoint /api/activities/{id}/assign
  - Dashboard para EJECUTOR con:
    - Lista de tareas asignadas por prioridad
    - Visualización de progreso de tareas actuales
    - Calendario de vencimientos
    - Estadísticas de rendimiento
  - Formulario de actualización de progreso:
    - Interfaz para actualizar el progreso de tareas con control deslizante
    - Sistema de comentarios para registrar avances
    - Funcionalidad para completar tareas
    - Conexión con los endpoints /api/activities/{id}/progress y /api/activities/{id}/complete
  - Actualización del menú lateral para incluir acceso a los dashboards
  - Actualización de rutas para soportar los nuevos componentes
- Script de migración para corregir datos de actividades (V7__Fix_Activity_Data.sql)
- Documentación detallada sobre el mecanismo de login y rutas protegidas en README.md
- Manejo de errores más robusto en el frontend para mostrar datos vacíos cuando hay errores
- Controlador de diagnóstico para verificar el estado de la aplicación y las rutas disponibles
- Implementación de endpoints para el flujo de trabajo de actividades
  - Endpoint POST /api/activities/request para crear solicitudes (SOLICITANTE)
  - Endpoint POST /api/activities/{id}/assign para asignar tareas (ASIGNADOR)
  - Endpoint POST /api/activities/{id}/start para iniciar tareas (EJECUTOR)
  - Endpoint POST /api/activities/{id}/complete para completar tareas (EJECUTOR)
  - Endpoint POST /api/activities/{id}/approve para aprobar tareas (ASIGNADOR)
  - Endpoint POST /api/activities/{id}/reject para rechazar tareas (ASIGNADOR)
  - Endpoint POST /api/activities/{id}/cancel para cancelar tareas
  - Endpoint POST /api/activities/{id}/comment para agregar comentarios
  - DTOs específicos para cada operación del flujo de trabajo
  - Implementación completa de la funcionalidad de comentarios en actividades

### Agregado
- Inicio del Sprint 15: Implementación del Sistema de Gestión de Tareas
  - Implementación del nuevo modelo de datos para el sistema de gestión de tareas
    - Unificación de enumeraciones de roles en UserRole con roles ADMIN, ASIGNADOR, SOLICITANTE, EJECUTOR, SUPERVISOR, USUARIO, CONSULTA
    - Creación de enum ActivityStatusNew con estados REQUESTED, ASSIGNED, IN_PROGRESS, COMPLETED, APPROVED, REJECTED, CANCELLED
    - Creación de enum ActivityPriority con niveles CRITICAL, HIGH, MEDIUM, LOW, TRIVIAL
    - Ampliación del modelo Activity con campos para flujo de trabajo, seguimiento y métricas
    - Creación de entidades ActivityCategory, ActivityHistory, ActivityComment y ActivityAttachment
    - Implementación de migración de base de datos V3__Add_Task_Management_Fields.sql
    - Creación de entidades JPA y repositorios para las nuevas entidades
    - Implementación de mappers para convertir entre entidades JPA y modelos de dominio
    - Creación de interfaces de repositorio en la capa de dominio
    - Implementación de repositorios en la capa de infraestructura
    - Creación de servicios de dominio para gestionar las entidades
    - Implementación de servicios de aplicación para exponer la funcionalidad
    - Creación de DTOs y mappers para la API REST
    - Implementación de controladores REST para exponer la funcionalidad
  - Implementación del flujo de trabajo para actividades
    - Implementación del patrón State para estados de actividad
    - Creación de clases concretas para cada estado (RequestedState, AssignedState, InProgressState, etc.)
    - Implementación de reglas de transición entre estados
    - Desarrollo de validaciones para cada transición
    - Implementación de servicio para gestionar el flujo de trabajo de actividades
  - Corrección de pruebas unitarias
    - Configuración de datos de prueba para tests
    - Actualización de la configuración de pruebas para cargar datos SQL
    - Corrección de errores en la inicialización del contexto de Spring
  - Implementación de interfaces específicas para roles
    - Implementación de interfaz para SOLICITANTES con formulario de solicitudes y seguimiento
    - Implementación de interfaz para ASIGNADORES con bandeja de entrada, distribución de carga y métricas
    - Implementación de interfaz para EJECUTORES con vista de tareas asignadas, progreso y historial
    - Implementación de sistema de navegación adaptativo con menú lateral dinámico según el rol del usuario
  - Implementación de sistema de categorización y priorización de tareas
    - Desarrollo de componentes para gestión de categorías con colores personalizables
    - Implementación de sistema de prioridades con niveles configurables
    - Creación de interfaz de administración para categorías y prioridades
    - Integración con el flujo de trabajo para clasificar y priorizar tareas
  - Implementación de sistema de notificaciones para el flujo de trabajo
    - Desarrollo de centro de notificaciones con filtros por tipo
    - Implementación de indicador de notificaciones no leídas
    - Creación de panel de configuración de preferencias de notificaciones
    - Integración de múltiples canales de notificación (app, email, push)
  - Desarrollo de reportes y métricas para seguimiento de tareas
    - Implementación de dashboard con resumen de tareas y distribución por estados
    - Creación de gráficos de distribución por categorías
    - Desarrollo de análisis de tendencias de tiempos de respuesta y completado
    - Implementación de métricas de rendimiento por usuario
  - Preparación para integración futura con Google Calendar y Drive
    - Diseño e implementación de interfaces para Google Calendar API
    - Diseño e implementación de interfaces para Google Drive API
    - Creación de panel de configuración para integraciones
    - Implementación de servicios mock para pruebas de integración

## [0.14.1] - 2025-04-25

### Agregado
- Inicio del Sprint 14: Mejoras de Rendimiento y Correcciones de Errores
  - Corrección de problemas con el token de autenticación
    - Revisión del flujo de autenticación en el frontend
    - Corrección de la forma en que se obtiene y almacena el token
    - Implementación de manejo de errores más robusto para problemas de autenticación
  - Planificación de mejoras de rendimiento
    - Optimización de consultas de base de datos
    - Implementación de índices adicionales en tablas críticas
    - Mejora del rendimiento del frontend
    - Implementación de técnicas avanzadas de virtualización
  - Planificación de pruebas automatizadas
    - Configuración de Jest y React Testing Library para el frontend
    - Configuración de JUnit y Mockito para el backend
    - Implementación de pruebas unitarias para componentes comunes
    - Creación de pruebas para flujos críticos de la aplicación
  - Planificación de corrección de errores y advertencias
    - Corrección de advertencias de Checkstyle en el backend
    - Resolución de problemas de código no utilizado
    - Corrección de posibles null pointer exceptions
    - Resolución de advertencias de ESLint en el frontend
    - Mejora de la documentación del código
  - Refactorización de la inicialización de datos de prueba
    - Consolidación de datos de prueba en migraciones Flyway
    - Creación de migración V3__Consolidated_Test_Data.sql
    - Deshabilitación del mecanismo data.sql
    - Modificación de DataInitializer para que solo se active con el perfil "data-init"
    - Implementación de prueba unitaria para verificar la inicialización de datos
    - Documentación del nuevo enfoque en README-DATA-INITIALIZATION.md

### Agregado
- Implementación de visualización de estadísticas
  - Creación de componente ActivityTypeStats para mostrar estadísticas por tipo de actividad
  - Creación de componente ActivityStatusStats para mostrar estadísticas por estado de actividad
  - Creación de componente ActivitySummaryList para mostrar resúmenes de actividades
  - Integración de componentes de estadísticas en el dashboard
  - Implementación de hooks personalizados para obtener estadísticas del backend

### Corregido
- Problema con la autenticación en el frontend
  - Corrección de la forma en que se obtiene el token de autenticación en api-ky.ts
  - Simplificación de la verificación de autenticación en Activities.tsx
  - Corrección del hook useSocket para usar useRealTimeNotifications
  - Integración del ToastProvider en App.tsx para resolver errores en el calendario
  - Eliminación de datos mockeados y mejora de la integración con el backend
  - Implementación de manejo de errores más robusto en el servicio de actividades
- Error en el componente ActivitySummaryList
  - Creación del componente TypeBadge.tsx faltante
  - Actualización del archivo de exportación para incluir el nuevo componente
  - Eliminación de archivos duplicados de StatusBadge y TypeBadge
  - Eliminación de archivos duplicados de PageTransition y AnimatedRoutes
  - Actualización de importaciones en componentes que usaban las versiones antiguas
- Corrección de errores en el Dashboard
  - Solución del error "value.toString is not a function" en los gráficos de Chart.js
    - Corrección en ActivityTypeStats.tsx
    - Corrección en ActivityStatusStats.tsx
  - Corrección de URLs con doble slash en las peticiones API
  - Solución del error "Invalid time value" en el formateo de fechas
  - Implementación de función formatDistanceToNowSafe para manejo seguro de fechas

## [0.14.0] - 2025-04-24

### Agregado
- Completado el Sprint 13: Unificación de Estilos y Corrección de Errores TypeScript
  - Unificación de archivos statusColors.ts en shared/styles
  - Unificación de archivos theme.ts en shared/styles
  - Corrección de errores en interfaces de tema
  - Corrección de errores en interfaces de colores
  - Corrección de componentes que acceden a propiedades inexistentes del tema
  - Mejora de la estructura de carpetas

## [0.13.1] - 2025-04-23

### Agregado
- Completado el Sprint 12: Refactorización de Arquitectura y Solución de Problemas de Plantillas
  - Consolidación de archivos duplicados
  - Migración completa a TypeScript
  - Reorganización de la estructura de carpetas
  - Mejora de la gestión de estado
  - Solución del problema de las plantillas
  - Documentación y pruebas
  - Corrección de errores de dependencias faltantes
  - Implementación de sistema de notificaciones toast con react-toastify
  - Corrección de problemas de autenticación y duplicación de rutas API
  - Corrección de errores de TypeScript en componentes
  - Deshabilitación completa de Zipkin para evitar errores de conexión

## [0.13.0] - 2025-04-22

### Cambios
- Inicio del Sprint 13: Unificación de Estilos y Corrección de Errores TypeScript
- Unificación de archivos statusColors.ts en shared/styles
- Actualización de importaciones para usar la versión unificada de statusColors.ts
- Unificación de archivos theme.ts en shared/styles
- Actualización de importaciones para usar la versión unificada de theme.ts
- Mejora de las interfaces ColorScheme, StatusColorMap y TypeColorMap con tipos más precisos
- Corrección de componentes que acceden a propiedades inexistentes del tema

### Corregido
- Corrección de errores de TypeScript en theme.ts y styled.d.ts
- Corrección de propiedades duplicadas en statusColors.ts
- Corrección de importaciones en shared/styles/index.ts
- Corrección de referencias a propiedades inexistentes del tema en componentes

### Agregado
- Mejoras en formularios de actividades con validación y asistencia
  - Implementación de componente AutocompleteInput para sugerencias mientras se escribe
  - Sistema de sugerencias contextuales basadas en datos históricos
  - Validación en tiempo real con mensajes específicos y contextuales
  - Autocompletado inteligente para campos comunes (personas, roles, dependencias, agentes)
  - Relaciones contextuales entre campos (sugerir roles según la persona seleccionada)
  - Almacenamiento de datos frecuentes en localStorage para mejorar la experiencia de usuario
  - Indicadores visuales para sugerencias basadas en el historial de una persona
  - Validación mejorada con Zod para todos los campos del formulario
  - Mensajes de error más descriptivos y específicos

- Sistema de plantillas para actividades
  - Creación de interfaz para guardar actividades como plantillas
  - Implementación de selector de plantillas al crear actividades
  - Gestión de plantillas (CRUD) con búsqueda y filtrado
  - Almacenamiento local de plantillas con localStorage
  - Aplicación de plantillas manteniendo la fecha y hora actuales
  - Corrección de problemas de visualización de botones de plantillas
  - Mejora de estilos de botones para mayor consistencia visual

- Mejoras de seguridad y manejo de credenciales
  - Actualización del archivo .gitignore para excluir archivos con información sensible
  - Creación de plantillas de ejemplo para archivos de configuración (gcp.oauth.json.example)
  - Documentación mejorada sobre manejo seguro de credenciales
  - Actualización de .env.example con ejemplos más completos y seguros
  - Prevención de exposición accidental de secretos en el repositorio

- Implementación de vista de calendario para actividades
  - Creación de componente Calendar con múltiples vistas (mensual, semanal y diaria)
  - Visualización de actividades por día con indicadores de estado
  - Navegación entre períodos (mes, semana, día) con botones de anterior/siguiente
  - Integración con los componentes StatusBadge y TypeBadge
  - Diseño responsive y estilizado con glassmorphism
  - Acceso directo a la creación y edición de actividades desde el calendario
  - Funcionalidad de arrastrar y soltar para cambiar fechas de actividades
  - Tooltip con detalles al pasar el cursor sobre actividades
  - Navegación directa al detalle de actividad al hacer clic
  - Corrección de error 404 al hacer clic en actividades del calendario
  - Leyenda con referencias de colores para tipos y estados
  - Ordenación de actividades con las más recientes primero
  - Mejora de estilos en botones, tooltip y leyenda para mantener consistencia visual con el resto de la aplicación
  - Indicador de tiempo actual en las vistas semanal y diaria
  - Sistema de filtros por estado y tipo de actividad
  - Confirmación al mover actividades entre fechas
  - Botón para actualizar manualmente las actividades

### Corregido
- Problema de carga de actividades en el calendario usando el hook correcto (useActivitiesQuery)
- Adaptación del componente al formato de datos recibido del backend ({activities: [...]} en lugar de {content: [...]})
- Mejora en la depuración con logs detallados para identificar problemas de formato de fecha
- Corrección de la funcionalidad de arrastrar y soltar con la API de HTML5
  - Implementación correcta de los eventos dataTransfer para transferir datos entre elementos
  - Mejora de la retroalimentación visual durante el arrastre
  - Manejo robusto de errores durante el proceso de arrastrar y soltar
  - Corrección del sistema de notificaciones usando el hook useToast en lugar de showNotification
  - Implementación de actualización real de actividades en el backend
  - Corrección de las URLs de la API para incluir el prefijo '/api'
  - Corrección del formato de fecha para compatibilidad con LocalDateTime en el backend
  - Implementación de actualización optimista en la interfaz de usuario
  - Reemplazo del popup nativo por un diálogo de confirmación personalizado
  - Corrección de errores en el componente de notificaciones

### Cambiado
- Componentes reutilizables para píldoras de estado y tipo
  - Creación de componentes StatusBadge y TypeBadge en la carpeta components/ui
  - Unificación de estilos para mantener consistencia visual en toda la aplicación
  - Mejora de la experiencia de usuario con efectos de hover y transiciones
  - Solución de problemas de visualización de colores en diferentes componentes
- Refactorización de componentes que utilizan píldoras de estado y tipo
  - Actualización de ActivityList para usar los nuevos componentes
  - Actualización de ExpandableActivityDetail para usar los nuevos componentes
  - Actualización de ActivityGrid para usar los nuevos componentes
  - Eliminación de código duplicado en múltiples archivos
- Mejora en la paleta de colores para tipos de actividades
  - Actualización del color de "Reunión" a un azul turquesa más agradable
  - Actualización del color de "OTRO" a un azul grisáceo más suave
  - Implementación de sistema de normalización de valores para compatibilidad entre frontend y backend

### Eliminado
- Componente de prueba ColorTest para visualización de píldoras

## [Unreleased - Anterior]

### Agregado
- Inicio del Sprint 11: Mejoras Avanzadas del Sistema de Actividades
  - Diseño de filtros avanzados con guardado de configuraciones
  - Planificación de vista de calendario para actividades
  - Diseño de sistema de comentarios y menciones a usuarios
  - Planificación de sistema de etiquetas y categorización jerárquica
  - Diseño de funcionalidades de exportación e importación de datos
  - Planificación de optimizaciones de rendimiento para grandes volúmenes de datos
- Actualización del README con información sobre próximas mejoras
- Mejora de la documentación del sistema de actividades
- Unificación de archivos README para centralizar la documentación
  - Incorporación de la información de `frontend/README.md` en el README principal
  - Incorporación de la información de `frontend/README-ACTIVITIES.md` en el README principal
  - Actualización de los README secundarios para que redirijan al principal
- Implementación de detalles expandibles en el listado de actividades
  - Reemplazo del modal por un panel expandible al hacer clic en una actividad
  - Mantenimiento del modal para la vista de grid
  - Mejora de la experiencia de usuario al visualizar detalles de actividades
- Mejoras visuales con efecto glassmorphism
  - Implementación de estilos con efecto de vidrio esmerilado
  - Adición de efectos de profundidad y sombras
  - Mejora de transiciones y animaciones
- Mejora de la iconografía y elementos visuales
  - Iconos específicos para cada tipo de actividad
  - Badges mejoradas para estados y tipos
  - Indicadores visuales de estado con colores distintivos

### Agregado
- Implementación del Sprint 10: Sistema de Notificaciones Avanzado
  - Refactorización del modelo de notificaciones con jerarquía de clases
  - Implementación de `TaskAssignmentNotification` para notificaciones de asignación de tareas
  - Implementación de `TaskStatusChangeNotification` para notificaciones de cambio de estado
  - Implementación de `DeadlineReminderNotification` para recordatorios de fechas límite
  - Implementación de `AnnouncementNotification` para anuncios y comunicados
  - Implementación de `CollaborationNotification` para colaboración en tiempo real
  - Servicio `ActivityService` para gestionar actividades y publicar eventos de dominio
  - Servicio `ActivityNotificationService` para manejar eventos de actividades
  - Servicio `DeadlineReminderService` para enviar recordatorios programados
  - Servicio `AnnouncementService` para gestionar anuncios y comunicados
  - Servicio `CollaborationService` para gestionar colaboración en tiempo real
  - Controladores REST para anuncios y colaboración
  - DTOs para solicitudes de anuncios y colaboración

### Agregado
- Implementación del panel de preferencias de notificaciones
  - Configuración de tipos de notificaciones a recibir
  - Opciones para recibir notificaciones por email, push y sonido
  - Interfaz intuitiva con toggles y checkboxes
- Mejora del centro de notificaciones con categorización
  - Filtrado de notificaciones por categoría (Tareas, Fechas límite, Anuncios, Colaboración, Sistema)
  - Contador de notificaciones por categoría
  - Interfaz mejorada con iconos y colores distintivos
- Optimización de WebSockets con reconexión automática
  - Implementación de backoff exponencial para reintentos
  - Sistema de heartbeat para detectar conexiones zombies
  - Sincronización del estado después de una reconexión
  - Notificaciones al usuario cuando se pierde la conexión
- Indicadores visuales de presencia en la interfaz de actividades
  - Servicio de colaboración en tiempo real para rastrear usuarios
  - Indicadores de quién está viendo o editando una actividad
  - Advertencias cuando otro usuario está editando la misma actividad
  - Tooltips con información detallada sobre los colaboradores
- Sistema de cola para mensajes no enviados durante desconexiones
  - Persistencia de mensajes en localStorage para recuperación entre sesiones
  - Prioridad configurable para mensajes (alta, media, baja)
  - Reintentos automáticos con límite configurable
  - Interfaz para visualizar y gestionar la cola de mensajes
  - Notificaciones sobre el estado de los mensajes en cola
- Compresión de mensajes para optimizar rendimiento
  - Compresión automática de mensajes grandes usando la API CompressionStream
  - Fallback a pako.js para navegadores sin soporte nativo
  - Configuración de umbral y nivel de compresión
  - Estadísticas de compresión en tiempo real
  - Interfaz para gestionar la configuración de compresión
- Niveles de urgencia configurables para notificaciones
  - Implementación de cuatro niveles: Baja, Media, Alta y Crítica
  - Visualización diferenciada según nivel de urgencia
  - Interfaz para configurar el nivel de urgencia por tipo de notificación
  - Animaciones y estilos visuales para destacar notificaciones urgentes
- Mejoras en la visualización de notificaciones específicas
  - Visualización especializada para cada tipo de notificación
  - Destacado visual para recordatorios de fechas límite urgentes
  - Cuenta regresiva para eventos programados
  - Indicadores de colaboración en tiempo real
- Acciones rápidas en notificaciones
  - Botón para ver actividad directamente desde la notificación
  - Opción para marcar como leída sin salir del centro de notificaciones
  - Funcionalidad para posponer recordatorios (15m, 30m, 1h, 4h)
  - Opción para descartar recordatorios no relevantes

### Agregado
- Sistema de notificaciones en tiempo real con WebSockets
  - Servicio WebSocket para comunicación en tiempo real
  - Contexto para gestionar notificaciones
  - Componente de centro de notificaciones
  - Integración con el sistema de notificaciones toast
- Creado cliente HTTP basado en ky para peticiones a la API
- Configurado alias de importación en Vite para mejorar la organización del código
- Instalada dependencia date-fns para formateo de fechas

### Corregido
- Corregido error de sintaxis JSX en archivos .js renombrando a .jsx
  - Servidor WebSocket en el backend con Spring
  - Autenticación JWT para WebSockets
- Sistema de gestión de sesiones múltiples
  - Registro de sesiones de usuario con información detallada
  - Endpoints para listar y gestionar sesiones activas
  - Detección de sesiones sospechosas
  - Cierre remoto de sesiones
  - Vista de sesiones activas con información detallada
  - Filtros y búsqueda de sesiones
  - Botón para cerrar sesiones individuales

### Corregido
- Error de compilación en AuthService.java debido a imports incorrectos
- Error de compilación en UserSessionService.java por métodos indefinidos
- Error de compilación en WebSocketAuthenticationConfig.java por métodos indefinidos
- Actualización de métodos para usar la clase JwtTokenProvider correctamente
- Reemplazo de getUsernameFromToken por getUsername en todas las clases
- Agregadas anotaciones @NonNull faltantes en WebSocketAuthenticationConfig.java
- Documentadas tareas para corregir advertencias de Checkstyle
- Documentadas tareas para corregir problemas de generación de OpenAPI
- Mejorado el script start-dev.bat para generar el archivo OpenAPI antes de compilar el backend
- Verificada la solución existente para la generación de tipos TypeScript desde OpenAPI
- Implementado el método getUserIdFromUsername en JwtTokenProvider para corregir errores en SessionController
- Resuelto conflicto de beans entre controladores de autenticación
- Renombrado y reorganizado controladores de autenticación para evitar conflictos
- Consolidado controladores de autenticación utilizando el servicio AuthService
- Eliminados controladores de autenticación obsoletos (LegacyAuthController y OldAuthController)
- Menú de usuario mejorado con submenús y más opciones
- Configuración de tiempo de inactividad personalizable
- Selección de temas (claro/oscuro) desde el menú de usuario
- Sistema unificado de notificaciones toast con soporte para accesibilidad
- Componente LazyImage para carga diferida de imágenes
- Transiciones suaves entre páginas con el componente PageTransition
- Sistema mejorado de skeleton loaders con múltiples variantes
- Soporte para el usuario de prueba `testuser` con contraseña `test123`
- Script unificado `start-app.bat` para iniciar toda la aplicación
- Funcionalidad de cierre de sesión con menú desplegable en el header
- Animaciones y transiciones en el menú de usuario
- Información detallada del usuario en el menú desplegable
- Temporizador de inactividad para cierre automático de sesión
- Endpoint en el backend para invalidar tokens JWT
- Lista negra de tokens JWT en el backend
- Funcionalidad para colapsar el sidebar a iconos
- Botón para alternar entre sidebar expandido y colapsado
- Listado de actividades funcional conectado a la API
- Estados de carga y error en el listado de actividades
- Mensaje cuando no hay actividades
- Paginación funcional para el listado de actividades
- Hooks personalizados para operaciones CRUD con React Query
- Validación de parámetros para evitar errores 500
- Sistema de caché en localStorage para mejorar la experiencia offline
- Debounce para la búsqueda de actividades
- Generación automática de tipos TypeScript desde OpenAPI
- Especificaciones JPA para filtros dinámicos de actividades
- Proyecciones JPA para optimizar consultas
- Endpoints para estadísticas de actividades por tipo y estado
- Endpoint para obtener resúmenes de actividades
- Sistema de refresh tokens automáticos
- Interceptor para renovación automática de tokens en el frontend
- Manejo centralizado de errores en el backend con códigos específicos
- Respuestas de error estructuradas con detalles y códigos
- Script mejorado para generar tipos TypeScript desde OpenAPI
- Documentación detallada sobre la generación de tipos TypeScript
- Actualización del archivo de tareas con nuevas tareas para pruebas unitarias e integración
- Actualización del README con el estado actual del proyecto y próximos pasos

### Cambiado
- Unificación del sistema de notificaciones toast para usar un solo proveedor
- Mejora en la experiencia de usuario con transiciones entre páginas
- Optimización de carga de imágenes con lazy loading
- Actualización de los skeleton loaders para mayor consistencia visual
- Corrección de rutas de importación para resolver problemas con alias @/
- Implementación de soluciones temporales para evitar dependencias problemáticas (date-fns, socket.io-client)
- Corrección de importación de useAppSelector en RealTimeNotificationContext
- Corrección de importación de toggleTheme en Header.jsx
- Corrección de error de RealTimeNotificationProvider
- Corrección de error de styled-components en PageTransition.tsx
- Corrección de orden de proveedores en App.jsx
- Actualización de las contraseñas de los usuarios de prueba:
  - `admin`: Admin@123
  - `usuario`: Usuario@123
  - `testuser`: test123
- Mejora en la configuración de seguridad para permitir el acceso a las rutas de autenticación
- Actualización de la documentación con las nuevas credenciales de usuarios
- Migración de Redux a React Query para la gestión de estado del servidor
- Mejora en el manejo de errores con mensajes más específicos
- Optimización de componentes para reducir re-renderizados innecesarios
- Actualización de propiedades en componentes styled-components para usar el prefijo `$`
- Refactorización del repositorio de actividades para usar especificaciones JPA
- Mejora en la documentación de la API con OpenAPI 3.0
- Optimización de consultas de actividades con proyecciones
- Mejora en el manejo de excepciones con GlobalExceptionHandler
- Implementación de códigos de error estandarizados
- Actualización del flujo de autenticación para soportar refresh tokens
- Actualización del script start-app.bat para incluir la generación de tipos TypeScript
- Mejora en la visualización de detalles de actividades con panel expandible en la vista de lista
- Mejora en la paleta de colores para píldoras de estado y tipo de actividades
  - Colores más intuitivos y significativos para cada estado (verde para completado, azul para en progreso, etc.)
  - Sistema centralizado de colores para mantener consistencia visual
  - Efectos mejorados de hover y sombras para elementos interactivos
  - Optimización del código para usar acceso directo a propiedades de color
  - Corrección de compatibilidad con valores reales de estados y tipos
  - Solución de problemas de renderizado de colores en componentes styled

### Eliminado
- Scripts innecesarios de actualización de contraseñas
- Configuración redundante en el proxy de Vite
- Sistema de datos simulados (mock) para cuando el backend no está disponible
- Hook useMockData y todas sus referencias

### Corregido
- Problema de autenticación con el usuario `admin`
- Conflicto de puertos con Grafana en el puerto 3000
- Error 403 Forbidden en la ruta `/auth/login`
- Error en la autenticación al acceder a la sección de actividades
- Problema con el envío del token JWT en las solicitudes a la API
- Redirección a la página de login cuando el usuario no está autenticado
- Error al cerrar sesión debido a una importación faltante de `authService`
- Error 500 al enviar valores negativos en el parámetro 'page'
- Advertencias de styled-components para props 'status', 'show', 'danger' y otras propiedades booleanas
- Ciclos infinitos de renderizado en el componente Activities
- Peticiones repetidas al endpoint de actividades
- Error 500 al crear actividades debido a incompatibilidad de formato de fecha con la zona horaria Z
- Problema con la actualización del listado de actividades al crear una nueva actividad
- Botón "Refrescar datos" innecesario en la vista de actividades
- Error "React is not defined" en componentes JSX que no importaban React explícitamente

## [0.1.0] - 2025-04-16

### Agregado
- Implementación inicial de la arquitectura hexagonal
- Configuración básica de Spring Boot
- Implementación de autenticación con JWT
- Configuración de base de datos H2 para desarrollo
- Implementación de frontend con React y TypeScript
- Configuración de Docker y Docker Compose
- Configuración de CI/CD con GitHub Actions
- Configuración de monitoreo con Prometheus y Grafana
- Configuración de tracing distribuido con Zipkin
- Documentación inicial del proyecto
